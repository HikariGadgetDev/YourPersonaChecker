// data.js: 簡易版(8問/機能)と詳細版(12問/機能)の両対応 - 認知機能特徴の全貌カバー版

// 認知機能の定義
export const FUNCTIONS = {
    Ni: { name: 'Ni', fullName: '内向的直観', description: '洞察と未来予測' },
    Ne: { name: 'Ne', fullName: '外向的直観', description: '可能性の探求' },
    Si: { name: 'Si', fullName: '内向的感覚', description: '経験と伝統' },
    Se: { name: 'Se', fullName: '外向的感覚', description: '現在の体験' },
    Ti: { name: 'Ti', fullName: '内向的思考', description: '論理的分析' },
    Te: { name: 'Te', fullName: '外向的思考', description: '効率的実行' },
    Fi: { name: 'Fi', fullName: '内向的感情', description: '個人的価値' },
    Fe: { name: 'Fe', fullName: '外向的感情', description: '調和と共感' }
};

// 認知機能スタック定義（16タイプ）
export const COGNITIVE_STACKS = {
    INTJ: ['Ni', 'Te', 'Fi', 'Se'],
    INTP: ['Ti', 'Ne', 'Si', 'Fe'],
    ENTJ: ['Te', 'Ni', 'Se', 'Fi'],
    ENTP: ['Ne', 'Ti', 'Fe', 'Si'],
    INFJ: ['Ni', 'Fe', 'Ti', 'Se'],
    INFP: ['Fi', 'Ne', 'Si', 'Te'],
    ENFJ: ['Fe', 'Ni', 'Se', 'Ti'],
    ENFP: ['Ne', 'Fi', 'Te', 'Si'],
    ISTJ: ['Si', 'Te', 'Fi', 'Ne'],
    ISFJ: ['Si', 'Fe', 'Ti', 'Ne'],
    ESTJ: ['Te', 'Si', 'Ne', 'Fi'],
    ESFJ: ['Fe', 'Si', 'Ne', 'Ti'],
    ISTP: ['Ti', 'Se', 'Ni', 'Fe'],
    ISFP: ['Fi', 'Se', 'Ni', 'Te'],
    ESTP: ['Se', 'Ti', 'Fe', 'Ni'],
    ESFP: ['Se', 'Fi', 'Te', 'Ni']
};

// 質問生成関数（逆転項目対応）
function makeQuestions(type, texts, baseId, reverseIndices = []) {
    return texts.map((text, i) => ({
        id: baseId + i,
        text,
        type,
        reverse: reverseIndices.includes(i)
    }));
}

// ============================================
// 詳細版質問文（12問/機能、計96問）
// 各認知機能の特徴を多角的にカバー
// ============================================

const detailedQuestionTexts = {
    Ni: [
        // 【象徴的理解・本質把握】
        "物事の背後にある「本当の意味」が、ふと理解できる瞬間がある",
        "表面的な説明より、その奥にある本質を掴むことに興味がある",
        // 【パターン認識・収束的洞察】
        "バラバラな情報から、一つの明確な結論が自然と浮かび上がってくる",
        "複数の出来事が「実は同じ構造だ」と気づくことがよくある",
        // 【未来ビジョン・長期予測】
        "今の選択が10年後にどう影響するか、映像として見える",
        "遠い未来の目標から逆算して、今すべきことを決める",
        // 【深い没頭・単一焦点】
        "一つのテーマを深く掘り下げることに、時間を忘れて熱中する",
        "興味を持ったことは、徹底的に理解するまで追求したい",
        // 【直感的確信・非言語的理解】
        "説明できないけれど「これが答えだ」という確信を持つことがある",
        "言葉にする前に、答えが「わかってしまう」感覚がある",
        // 【逆転項目：具体性・即物性】
        "抽象的な解釈より、具体的な事実の積み重ねの方が信頼できる", // R
        "過去や未来より、今目の前のことに意識を向けている時間が長い" // R
    ],
    
    Ne: [
        // 【発散的思考・多様なアイデア生成】
        "一つの話題から、まったく別の10個のアイデアが次々浮かぶ",
        "「もしこうだったら？」と想像を広げるのが楽しい",
        // 【可能性探求・実験志向】
        "確立されたやり方より、試したことのない方法に惹かれる",
        "「普通はこうだけど、別のやり方もあるはず」と考えることが多い",
        // 【連想・関連性の発見】
        "全く関係なさそうな2つのことを、結びつけて考えるのが得意",
        "「これとあれを組み合わせたら面白い」とよく思いつく",
        // 【選択肢の保持・決定の困難】
        "選択肢を絞り込むより、できるだけ多く残しておきたい",
        "一つに決めた後も、「別の選択肢も良かったかも」と考えてしまう",
        // 【話題の跳躍・文脈の拡張】
        "話しているうちに、最初と全然違うテーマになっていることがよくある",
        "一つの質問から、関連する様々な疑問が次々に湧いてくる",
        // 【逆転項目：収束性・継続性】
        "色々試すより、一つの方法を深く追求する方が成果が出る", // R
        "新しい挑戦より、慣れた方法で着実に進める方が安心できる" // R
    ],
    
    Si: [
        // 【詳細な記憶・感覚的再現】
        "過去の出来事を、その時の匂いや温度まで鮮明に思い出せる",
        "「前にこれと同じ状況があった」と、過去の記憶がすぐ浮かぶ",
        // 【経験の参照・前例重視】
        "「以前これでうまくいった」という経験を判断の基準にする",
        "実績のある方法の方が、未知の方法より安心できる",
        // 【伝統・確立された手順の信頼】
        "長年続けられてきたルールには、それなりの理由があると思う",
        "試行錯誤された手順を守る方が、効率的だと感じる",
        // 【ルーティン・一貫性】
        "毎日同じ手順で物事を進めると、調子が良い",
        "予定が急に変わると、気持ちを切り替えるのに時間がかかる",
        // 【細部への注意・違いの察知】
        "いつもと微妙に違うことに、すぐ気づく",
        "環境の細かい変化を感じ取ることが多い",
        // 【逆転項目：新規性・変化志向】
        "過去の成功例より、新しい可能性を試す方にワクワクする", // R
        "同じやり方を繰り返すより、毎回違うアプローチを取りたい" // R
    ],
    
    Se: [
        // 【現在への完全な没入】
        "今この瞬間に起きていることに、完全に集中できる",
        "「今、ここ」の体験を存分に味わうことに喜びを感じる",
        // 【環境の敏感な把握】
        "部屋に入った瞬間、誰がどこにいるか把握できる",
        "周囲の音、光、動きなどの変化にすぐ気づく",
        // 【実践的学習・身体知】
        "説明を読むより、実際に触って動かして覚える方が早い",
        "頭で理解するより、体を動かして結果を出すことを好む",
        // 【即応性・臨機応変な対応】
        "予期しないトラブルが起きても、その場で判断して動ける",
        "計画通りにいかなくても、状況に応じて柔軟に対応できる",
        // 【刺激追求・変化への欲求】
        "単調な日常より、刺激的で変化のある体験を求める",
        "スリルや興奮を感じられる活動に惹かれる",
        // 【逆転項目：計画性・将来志向】
        "即興で動くより、じっくり計画を練る方が成果が出る", // R
        "今の楽しさより、将来のために準備する方が重要だと思う" // R
    ],
    
    Ti: [
        // 【仕組みの理解・原理探求】
        "物事がどう動いているのか、仕組みを理解するまで気が済まない",
        "「なぜそうなるのか」を突き詰めて考える癖がある",
        // 【論理構造の分析・要素分解】
        "複雑な問題を、シンプルな要素に分解して考えるのが得意",
        "物事の構造や関係性を図式化して整理したくなる",
        // 【独自理論・内的一貫性】
        "既存の説明に納得できず、自分なりの理解の仕方を作る",
        "自分の論理体系の中で矛盾がないか、常に確認している",
        // 【矛盾の検出・論理的批判】
        "人の説明を聞いて、「今の話、矛盾している」と気づくことが多い",
        "論理的に筋が通っていない主張は、感動的でも納得できない",
        // 【効率化・無駄の削減】
        "回り道や無駄な手順を見つけると、省略したくなる",
        "「なぜこのやり方なのか」理由のないルールに従うのが苦手",
        // 【逆転項目：感情優先・調和重視】
        "論理的に正しくても、人を傷つけるなら言わない方が良い", // R
        "理屈より、その場の雰囲気や人の気持ちを優先して判断する" // R
    ],
    
    Te: [
        // 【目標設定・計画立案】
        "目標を立てたら、達成までの手順を具体的に書き出す",
        "締め切りから逆算して、スケジュールを組むのが習慣になっている",
        // 【効率化・システム構築】
        "非効率なやり方を見ると、改善案を考えずにいられない",
        "繰り返し作業は、自動化やテンプレート化して効率を上げたい",
        // 【客観的基準・データ重視】
        "感覚的な判断より、数字やデータに基づいて判断したい",
        "「なんとなく」ではなく、根拠を示して説明する方が説得力がある",
        // 【組織化・リソース管理】
        "グループで何かする時、自然と役割分担や進行を仕切っている",
        "人やモノをどう配置すれば最も効率的か考えることが多い",
        // 【結果志向・実行力】
        "過程がどうであれ、結果を出すことが最も重要だと思う",
        "計画したことは、確実に実行に移したい",
        // 【逆転項目：プロセス重視・柔軟性】
        "結果より、自分が納得できるプロセスで進める方が大切", // R
        "ルールや基準より、状況に応じた柔軟な対応の方が重要" // R
    ],
    
    Fi: [
        // 【内的価値観・個人的信念】
        "自分の中に、絶対に譲れない価値観がはっきりとある",
        "多数派が賛成していても、自分が納得できなければ反対する",
        // 【真正性・自己一致】
        "他人にどう見られるかより、自分に正直でいることを選ぶ",
        "「本当の自分」と違う振る舞いをすると、強い違和感を覚える",
        // 【深い共感・個別理解】
        "他人が傷ついている姿を見ると、自分の心も痛む",
        "表面的な付き合いより、少数の人と深く理解し合う関係を求める",
        // 【内省・感情の探求】
        "自分がなぜその感情を抱いたのか、じっくり考えることがある",
        "自分の価値観がどこから来ているのか、掘り下げて考える",
        // 【道徳的判断・良心】
        "損得より、それが正しいことかどうかで判断する",
        "たとえ不利でも、自分が正しいと思うことは貫きたい",
        // 【逆転項目：外的基準・集団調和】
        "自分の価値観より、周囲の期待に応える方が大切だと感じる", // R
        "個人的な信念より、客観的な基準で判断すべきだと思う" // R
    ],
    
    Fe: [
        // 【場の雰囲気・集団調和】
        "場の空気が悪くなると、自分から話題を変えたり和ませたりする",
        "意見が対立した時、まず全員が納得できる落とし所を探す",
        // 【感情の察知・共感的理解】
        "相手の表情や声のトーンから、今どんな気持ちか察することができる",
        "誰かの顔色が変わると、すぐに「何かあった？」と気になる",
        // 【他者支援・励まし】
        "落ち込んでいる人がいると、つい声をかけてしまう",
        "友人の悩みを聞いて、気持ちが楽になる言葉をかけることが多い",
        // 【社会的規範・期待への応答】
        "「こういう場ではこう振る舞うべき」という感覚が自然とある",
        "相手の期待に応えることが、自分の喜びにもつながる",
        // 【感情表現の促進・関係構築】
        "相手が言葉にできない気持ちを、代わりに言語化することがある",
        "人と人との間に温かい雰囲気を作ることが得意",
        // 【逆転項目：個人優先・率直性】
        "周囲の期待より、自分が正しいと思うことを優先する", // R
        "調和を保つより、率直に意見を言う方が誠実だと思う" // R
    ]
};

// 詳細版の逆転項目インデックス
const detailedReverseIndices = {
    Ni: [10, 11],
    Ne: [10, 11],
    Si: [10, 11],
    Se: [10, 11],
    Ti: [10, 11],
    Te: [10, 11],
    Fi: [10, 11],
    Fe: [10, 11]
};

// ============================================
// 簡易版質問文（8問/機能、計64問）
// 各認知機能の核心的特徴をバランスよくカバー
// ============================================

const simpleQuestionTexts = {
    Ni: [
        // 【本質把握・収束的洞察】
        "表面的な説明より、その奥にある本質を掴むことに興味がある",
        "バラバラな情報から、一つの明確な結論が自然と浮かび上がってくる",
        // 【未来ビジョン・長期思考】
        "今の選択が10年後にどう影響するか、映像として見える",
        "遠い未来の目標から逆算して、今すべきことを決める",
        // 【深い集中・単一焦点】
        "一つのテーマを深く掘り下げることに、時間を忘れて熱中する",
        // 【直感的確信】
        "説明できないけれど「これが答えだ」という確信を持つことがある",
        // 【逆転項目】
        "抽象的な解釈より、具体的な事実の積み重ねの方が信頼できる", // R
        "過去や未来より、今目の前のことに意識を向けている時間が長い" // R
    ],
    
    Ne: [
        // 【発散的思考・多様性】
        "一つの話題から、まったく別の10個のアイデアが次々浮かぶ",
        "「もしこうだったら？」と想像を広げるのが楽しい",
        // 【可能性探求・実験】
        "確立されたやり方より、試したことのない方法に惹かれる",
        "全く関係なさそうな2つのことを、結びつけて考えるのが得意",
        // 【選択肢保持・柔軟性】
        "選択肢を絞り込むより、できるだけ多く残しておきたい",
        // 【連想・話題展開】
        "話しているうちに、最初と全然違うテーマになっていることがよくある",
        // 【逆転項目】
        "色々試すより、一つの方法を深く追求する方が成果が出る", // R
        "新しい挑戦より、慣れた方法で着実に進める方が安心できる" // R
    ],
    
    Si: [
        // 【詳細記憶・感覚再現】
        "過去の出来事を、その時の匂いや温度まで鮮明に思い出せる",
        "「前にこれと同じ状況があった」と、過去の記憶がすぐ浮かぶ",
        // 【経験参照・実績重視】
        "「以前これでうまくいった」という経験を判断の基準にする",
        "実績のある方法の方が、未知の方法より安心できる",
        // 【ルーティン・一貫性】
        "毎日同じ手順で物事を進めると、調子が良い",
        // 【細部注意】
        "いつもと微妙に違うことに、すぐ気づく",
        // 【逆転項目】
        "過去の成功例より、新しい可能性を試す方にワクワクする", // R
        "同じやり方を繰り返すより、毎回違うアプローチを取りたい" // R
    ],
    
    Se: [
        // 【現在没入・体験重視】
        "今この瞬間に起きていることに、完全に集中できる",
        "「今、ここ」の体験を存分に味わうことに喜びを感じる",
        // 【環境把握・感覚鋭敏】
        "部屋に入った瞬間、誰がどこにいるか把握できる",
        "周囲の音、光、動きなどの変化にすぐ気づく",
        // 【実践・即応性】
        "説明を読むより、実際に触って動かして覚える方が早い",
        "予期しないトラブルが起きても、その場で判断して動ける",
        // 【逆転項目】
        "即興で動くより、じっくり計画を練る方が成果が出る", // R
        "今の楽しさより、将来のために準備する方が重要だと思う" // R
    ],
    
    Ti: [
        // 【仕組み理解・原理探求】
        "物事がどう動いているのか、仕組みを理解するまで気が済まない",
        "「なぜそうなるのか」を突き詰めて考える癖がある",
        // 【論理分析・要素分解】
        "複雑な問題を、シンプルな要素に分解して考えるのが得意",
        "物事の構造や関係性を図式化して整理したくなる",
        // 【矛盾検出・批判的思考】
        "人の説明を聞いて、「今の話、矛盾している」と気づくことが多い",
        // 【効率化】
        "回り道や無駄な手順を見つけると、省略したくなる",
        // 【逆転項目】
        "論理的に正しくても、人を傷つけるなら言わない方が良い", // R
        "理屈より、その場の雰囲気や人の気持ちを優先して判断する" // R
    ],
    
    Te: [
        // 【目標・計画】
        "目標を立てたら、達成までの手順を具体的に書き出す",
        "締め切りから逆算して、スケジュールを組むのが習慣になっている",
        // 【効率化・システム化】
        "非効率なやり方を見ると、改善案を考えずにいられない",
        "繰り返し作業は、自動化やテンプレート化して効率を上げたい",
        // 【データ・客観性】
        "感覚的な判断より、数字やデータに基づいて判断したい",
        // 【組織化・実行】
        "グループで何かする時、自然と役割分担や進行を仕切っている",
        // 【逆転項目】
        "結果より、自分が納得できるプロセスで進める方が大切", // R
        "ルールや基準より、状況に応じた柔軟な対応の方が重要" // R
    ],
    
    Fi: [
        // 【内的価値・信念】
        "自分の中に、絶対に譲れない価値観がはっきりとある",
        "多数派が賛成していても、自分が納得できなければ反対する",
        // 【真正性・自己一致】
        "他人にどう見られるかより、自分に正直でいることを選ぶ",
        "「本当の自分」と違う振る舞いをすると、強い違和感を覚える",
        // 【深い共感】
        "他人が傷ついている姿を見ると、自分の心も痛む",
        // 【道徳的判断】
        "損得より、それが正しいことかどうかで判断する",
        // 【逆転項目】
        "自分の価値観より、周囲の期待に応える方が大切だと感じる", // R
        "個人的な信念より、客観的な基準で判断すべきだと思う" // R
    ],
    
    Fe: [
        // 【場の調和・雰囲気管理】
        "場の空気が悪くなると、自分から話題を変えたり和ませたりする",
        "意見が対立した時、まず全員が納得できる落とし所を探す",
        // 【感情察知・共感】
        "相手の表情や声のトーンから、今どんな気持ちか察することができる",
        "誰かの顔色が変わると、すぐに「何かあった？」と気になる",
        // 【他者支援】
        "落ち込んでいる人がいると、つい声をかけてしまう",
        // 【社会的規範】
        "「こういう場ではこう振る舞うべき」という感覚が自然とある",
        // 【逆転項目】
        "周囲の期待より、自分が正しいと思うことを優先する", // R
        "調和を保つより、率直に意見を言う方が誠実だと思う" // R
    ]
};

// 簡易版の逆転項目インデックス
const simpleReverseIndices = {
    Ni: [6, 7],
    Ne: [6, 7],
    Si: [6, 7],
    Se: [6, 7],
    Ti: [6, 7],
    Te: [6, 7],
    Fi: [6, 7],
    Fe: [6, 7]
};

// ============================================
// モード切り替え機能
// ============================================

let currentMode = 'simple';

export function setMode(mode) {
    if (mode !== 'simple' && mode !== 'detailed') {
        console.warn(`Invalid mode: ${mode}. Using 'simple' instead.`);
        currentMode = 'simple';
        return;
    }
    currentMode = mode;
}

export function getMode() {
    return currentMode;
}

// ============================================
// 質問生成
// ============================================

function generateQuestions(mode = 'simple') {
    const texts = mode === 'detailed' ? detailedQuestionTexts : simpleQuestionTexts;
    const reverseIndices = mode === 'detailed' ? detailedReverseIndices : simpleReverseIndices;
    
    return [
        ...makeQuestions("Ni", texts.Ni, 1, reverseIndices.Ni),
        ...makeQuestions("Ne", texts.Ne, 1 + texts.Ni.length, reverseIndices.Ne),
        ...makeQuestions("Si", texts.Si, 1 + texts.Ni.length + texts.Ne.length, reverseIndices.Si),
        ...makeQuestions("Se", texts.Se, 1 + texts.Ni.length + texts.Ne.length + texts.Si.length, reverseIndices.Se),
        ...makeQuestions("Ti", texts.Ti, 1 + texts.Ni.length + texts.Ne.length + texts.Si.length + texts.Se.length, reverseIndices.Ti),
        ...makeQuestions("Te", texts.Te, 1 + texts.Ni.length + texts.Ne.length + texts.Si.length + texts.Se.length + texts.Ti.length, reverseIndices.Te),
        ...makeQuestions("Fi", texts.Fi, 1 + texts.Ni.length + texts.Ne.length + texts.Si.length + texts.Se.length + texts.Ti.length + texts.Te.length, reverseIndices.Fi),
        ...makeQuestions("Fe", texts.Fe, 1 + texts.Ni.length + texts.Ne.length + texts.Si.length + texts.Se.length + texts.Ti.length + texts.Te.length + texts.Fi.length, reverseIndices.Fe)
    ];
}

// 詳細版取得用関数
export function getDetailedQuestions() {
    return generateQuestions('detailed');
}

// 現在のモードに応じた質問取得
export function getQuestionsByMode(mode = currentMode) {
    return generateQuestions(mode);
}

// デフォルトエクスポート
export const questions = getQuestionsByMode();

// MBTIタイプ説明
export const mbtiDescriptions = {
    INTJ: { name: "建築家", description: "戦略的思考と革新的な洞察力を持つ完璧主義者。長期的ビジョンを実現するために論理的に計画を立てます。" },
    INTP: { name: "論理学者", description: "知的好奇心に満ちた思考家。複雑な問題を分析し、独創的な解決策を見出すことを楽しみます。" },
    ENTJ: { name: "指揮官", description: "生まれながらのリーダー。明確なビジョンと強い意志で組織を効率的に導きます。" },
    ENTP: { name: "討論者",description: "機知に富んだ革新者。アイデアの可能性を探求し、知的な議論を楽しみます。" },
    INFJ: { name: "提唱者", description: "理想主義的で共感力の高い洞察者。深い直感で人々を理解し、より良い未来を目指します。" },
    INFP: { name: "仲介者", description: "情熱的な理想主義者。自分の価値観に忠実で、創造的な表現を通じて世界をより良くしようとします。" },
    ENFJ: { name: "主人公", description: "カリスマ的なリーダー。人々を鼓舞し、調和のとれた環境で共通の目標に向けて導きます。" },
    ENFP: { name: "運動家", description: "熱意と創造性にあふれる自由な精神。人とのつながりを大切にし、新しい可能性を追求します。" },
    ISTJ: { name: "管理者", description: "責任感が強く信頼できる実務家。伝統と秩序を重んじ、着実に任務を遂行します。" },
    ISFJ: { name: "擁護者", description: "温かく献身的な保護者。他者への思いやりと、確立された方法を通じて人々を支えます。" },
    ESTJ: { name: "幹部", description: "実践的な組織者。明確なルールと効率的なシステムで物事を管理します。" },
    ESFJ: { name: "領事官", description: "社交的で思いやりのある世話役。調和を重視し、コミュニティの結束を大切にします。" },
    ISTP: { name: "巨匠", description: "実践的な問題解決者。論理的思考と手先の器用さで、即座に対応します。" },
    ISFP: { name: "冒険家", description: "柔軟で芸術的な探求者。自分の価値観に従い、美的体験を通じて人生を楽しみます。" },
    ESTP: { name: "起業家", description: "大胆で行動的な実践家。リスクを恐れず、今この瞬間を最大限に活用します。" },
    ESFP: { name: "エンターテイナー", description: "陽気で社交的なパフォーマー。人々を楽しませ、現在の喜びを分かち合います。" }
};