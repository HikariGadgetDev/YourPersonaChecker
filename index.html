<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MBTI 診断アプリ</title>
  <meta name="description" content="シンプルな MBTI 診断（Vanilla JS / ES Modules）" />
  
  <!-- Google Fonts - JetBrains Mono for numbers -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="wrap" role="application">

    <main class="main" id="app" aria-live="polite">
      <header class="app-head">
        <div class="logo">Ψ</div>
        <div>
          <h1>Cognitive Function Analysis</h1>
          <p class="lead">Discover your cognitive preferences through intuitive assessment</p>
        </div>
      </header>

      <div class="placeholder">
        <p style="color:var(--muted)">読み込みが完了するとここに問題が表示されます。</p>
      </div>
    </main>

    <aside class="side" aria-hidden="false">
      <div class="summary">
        <strong>進捗</strong>
        <div class="progress" aria-hidden="true"><i></i></div>

        <div class="score-list" id="scoreList" aria-hidden="true">
        </div>

        <footer class="note">データは端末に保存されません。結果は参考情報です。</footer>
      </div>
    </aside>

  </div>

  <script type="module" src="./app.js"></script>

  <script>
    window.__updateSidePanel = function(functionScores, currentQuestion, totalQuestions){
      const prog = document.querySelector('.progress > i');
      const pct = Math.round(((currentQuestion) / Math.max(1, totalQuestions - 1)) * 100);
      if (prog) prog.style.width = pct + '%';

      const list = document.getElementById('scoreList');
      if (!list) return;
      list.innerHTML = '';
      Object.entries(functionScores).forEach(([k,v])=>{
        const norm = Math.min(100, Math.round((Math.abs(v)/4) * 100));
        const el = document.createElement('div'); 
        el.className = 'score-item';
        el.innerHTML = `<div style="font-weight:700;min-width:48px">${k}</div><div style="font-family:'JetBrains Mono',monospace;font-size:20px;font-weight:800;background:linear-gradient(135deg,#60a5fa,#a78bfa);-webkit-background-clip:text;-webkit-text-fill-color:transparent;">${norm}</div>`;
        list.appendChild(el);
      });
    };
  </script>
</body>
</html>